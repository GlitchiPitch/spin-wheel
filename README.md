# Колесо Подарков

## Текущая Задача

### Сервер

**Инициализация при входе:**
- [ ] зафиксировать вход игрока
- [ ] получить данные из базы
- [ ] загрузить в кэш
- [ ] сделать валидацию (проверить наличие полей `canClaim: boolean`, `claimed: number`)
- [ ] если есть поле `claimed` — проверить сколько времени прошло (`time() - playerData.claimed >= 12h`)
- [ ] если прошло — устанавливаем аттрибут SpinWheel в состояние `timer` на игрока
- [ ] если нет или время не прошло и есть `canClaim` — устанавливаем его
- [ ] если время прошло — очищаем кэш, `playerData = {}`
- [ ] установить аттрибут по данным из базы (если есть поля `canClaim`, `claimed` — их, если нет — `timer`)
- [ ] если аттрибут `timer` — фиксируем время захода в кэше

**Обработка событий:**
- [ ] подписаться на remoteEvent
- [ ] фиксируем сигналы `TIME_PASSED` и `CLAIM_REWARD`
- [ ] делаем валидацию
- [ ] если `TIME_PASSED` — проверяем прошедшее время (`time() - playerData.startTime >= 5m`)
- [ ] если ок — меняем аттрибут игрока на `canClaim`, записываем в кэш `canClaim = true`, удаляем `startTime`
- [ ] далее ждём `CLAIM_REWARD`
- [ ] делаем валидацию аттрибута (`SpinWheel == CAN_CLAIM`)
- [ ] если ок — калькулируем награду, отправляем сигнал игроку `CLAIM_REWARD` с наградой (`data = {rewardName = rewardName}`)
- [ ] меняем аттрибут на `claimed`, записываем в кэш время взятия, удаляем `canClaim`

**Выход:**
- [ ] фиксируем выход игрока, записываем данные из кэша

### Клиент

- [ ] подписаться на обновление аттрибута SpinWheel
- [ ] загружаем UI в playerGui
- [ ] если аттрибут `timer` — запускать update
- [ ] настраиваем логику кнопки в прогресс баре
- [ ] если `timer` — открываем окно с показом какие награды можно выбить
- [ ] если `canClaim` — рулетку показываем
- [ ] если `claimed` — оповещение «приходи завтра»
- [ ] фиксируем нажатия на кнопки в прогресс баре, кнопки закрытия окон и кнопку рулетки
- [ ] фиксируем сигналы через remoteEvent

## Подключение проекта к плейсу
1. запустить в терминале
```bash
rojo serve --port 4003
```
2. подключиться через плагин rojo к плейсу
3. убедиться что в окне измененных файлов указаны только ваши файлы
